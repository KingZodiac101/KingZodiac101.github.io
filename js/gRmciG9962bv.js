/*!
 * cache=true
 * @license Licences are viewable at this URL: https://cdn1.gaiaonline.com/src/=/e143bb5df5304ae98988a03a4dabca2e-1478-303/src/js/modal/simplemodal.js
 */
/*! /src/js/modal/simplemodal.js */
YUI().add("simplemodal",(function(e){e.namespace("gaia");var t,a="457",n="",o=null,r=!1,i=0;t=(window.innerWidth-a)/2;var l=new e.Overlay({headerContent:'<div id="simple_modal_head"><a class="close" style="right:-436px"></a></div>',bodyContent:'<div id="simple_modal_content"></div>',footerContent:"",width:a,height:"345",x:t,y:102,zIndex:4});l.render(),l.hide(),l.bodyNode.addClass("simplemodal-body");var s=function(t){e.one("#simple_modal_content").setHTML(t),l.show()},d=function(t){t.preventDefault();var o,r,i=t.currentTarget,s=(i.get("id"),i.getData("width"));o=i.getData("offsety"),null!=s?(l.set("width",s),l.set("x",(window.innerWidth-s)/2),e.one("#simple_modal_head .close").setStyle("right",21-s+"px")):l.set("width",a),null!=o&&l.set("y",parseInt(o));var d=t.currentTarget.getAttribute("data-url")||t.currentTarget.get("href");null!=d&&(r=i.getData("redirect"),null!=s&&(n=r),c(d))},c=function(t,a,n){e.io(t,{method:"POST",data:a,on:{success:u,failure:f},arguments:n})},u=function(t,a,i){var l=null;if(a.responseText){if(i&&"ajax"==i.view||s(a.responseText),l=e.Node.create(a.responseText).one("form.auto-submit")){var d=l.getData("timedelay");setTimeout((function(){m(l)}),d)}if(r&&null!==o&&"success"===o.on)try{o.fn.call(o.scope,a.responseText)}catch(e){}}else window.location=n},f=function(e){s("<div class='simplemodal-error'>Oops, we encountered a problem.  Please try again.</div>")},m=function(t){e.io(t.get("action"),{method:"POST",useDisabled:!1,form:{id:t},on:{success:u,failure:f}})},h=function(t){var a=(new Date).getTime();if(!this.hasClass("allow")&&(t.preventDefault(),!(a-i<2e3)&&(i=a,(this.hasClass("close")||this.hasClass("cancel"))&&(this.hasClass("ajax-callback")&&c(this.getData("url"),{},{view:"ajax"}),l.hide()),this.hasClass("ajax-call")&&c(this.getData("url")||this.getAttribute("href")),this.hasClass("submit")))){if("form"==t.currentTarget.get("tagName").toLowerCase()?formData=t.currentTarget:formData=t.currentTarget.ancestor("form")||e.one(".simplemodal-body form"),null==formData)return;r=!0,m(formData)}};e.one("#simple_modal_head .close").on("click",h),e.one("#simple_modal_content").delegate("click",h,"a"),e.one("#simple_modal_content").delegate("keyup",(function(t){if(13==t.keyCode){var a=t.currentTarget.ancestor("form")||e.one(".simplemodal-body form");if(null==a)return;r=!0,m(a)}}),"input"),e.gaia.simplemodal={addHandler:function(t,a,n){if(null==n)throw new Error("selector is a required parameter");if(null==a)throw new Error("container is a required parameter");e.delegate(t,d,a,n)},addCallBack:function(e){if("object"==typeof e){if("function"!=typeof e.fn)throw new Error("Callback function 'fn' is not a function.");if(void 0!==e.on)switch(e.on){case"success":o=e;break;default:throw new Error("Invalid type for 'on' in addCallback.")}}}}}),"1.0.1",{requires:["io-base","event-delegate","event-key","io-form","overlay"]});